# 자바 8 람다와 인터페이스 스펙 변화

### 개요
- 기업 환경 변화와 프로그래머의 요구 반영을 위해 자바 8은 언어적으로 많은 변화를 맞이했다.
- 특히 함수형 프로그래밍 지원을 위한 람다(Lambda)의 도입이 두드러진다.

<br><br>
### 1. 람다 도입 이유
- 빅데이터 분석 및 활용을 통해 기업 전략을 수립하고, 수익을 극대화 하고자 했다.
- 이러한 분석은 ICT를 통해 이뤄질 수 밖에 없다.
- 따라서 빅데이터를 프로그램 적으로 다룰 수 있는 기술 -> 멀티코어를 활용한 분산처리(병렬화)가 필요하다.
- 하나의 CPU에 다수의 코어를 삽입하는 멀티코어 프로세서의 등장으로, 일반 프로그래머에게도 병렬화 프로그래밍에 대한 필요성이 생겼다.
- 자바 8에서는 병렬화를 위해 컬렉션을 강화했고, 이를 더 효율적으로 사용하기 위해 스트림을 강화했다.
- 또한 스트림 효율적인 사용을 위한 함수형 프로그래밍 -> 이를 위한 람다 -> 이를 위한 인터페이스의 변화가 수반됐다.
- 람다를 지원하기 위한 인터페이스를 함수형 인터페이스라고 한다. 
- 병렬 스트림을 지원하는 컬렉션에서 stream 대신 parallelStream을 사용하면 스트림 작업을 병렬로 처리할 수 있다.


### 2. 람다란 무엇인가
- 한 마디로 코드 블록이다. 이를 메서드의 인자나 반환값으로 활용할 수 있다.
- 즉 코드 블록을 변수처럼 사용할 수 있다는게 핵심이다.
- 변화는 다음과 같다.
    1. 기존에는 메서드를 사용하기 위해 꼭 클래스를 만들어야 했다.
    2. 이를 익명 클래스를 이용한 객체를 통해 변경했다.(java 8 이전)
    3. 이제는 익명 객체조차 만들 필요가 없게 되었다.(람다)
    

### 3. 함수형 인터페이스
- Runnable interface는 run()이라는 추상 메서드를 하나만 가진다. 
- 이처럼 추상 메서드를 하나만 갖는 인터페이스를 자바 8부터는 함수형 인터페이스라고 한다.
- 함수형 인터페이스 만을 람다식으로 변경할 수 있다.


### 3.1 자바 8 API에서 제공하는 함수형 인터페이스
- 개발자들이 많이 사용할 것이라고 예상하는 함수형 인터페이스를 java.util.function 패키지와 여러 패키지에서 제공한다.
- 대표적 함수 인터페이스는 다음과 같다. 총 43개 제공하며, 아래에 없다면 함수형 인터페이스를 정의해서 사용하면 된다.
    - Runnable : 추상 메서드 (void run()) : 실행할 수 있는 인터페이스
    - Supplier<T> : 추상 메서드 (T get()) : 제공할 수 있는 인터페이스
    - Consumer<T> : 추상 메서드 (void accept(T t)) : 소비할 수 있는 인터페이스
    - Function<T, R> : 추상 메서드 (R apply(T t)) : 입력 T를 받아 R로 출력하는 인터페이스
    - Predicate<T> : 추상 메서드 (Boolean test(T t)) : 입력을 받아 참/거짓을 단정하는 인터페이스
    - UnaryOperator<T> : 추상 메서드 (T apply(T t)) : 단항(Unary) 연산하는 인터페이스 - 입출력 동일 클래스

- 위의 인터페이스는 다음과 같이 응용되어있다.      
    - BiConsumer<T, U> : 추상 메서드 (void accept(T t, U u)) : 이항 소비자 인터페이스
    - BiFunction<T, U, R> : 추상 메서드 (R apply(T t, U u)) : 이항 함수 인터페이스
    - BiPredicate<T, U> : 추상 메서드 (Boolean test(T t, U u)) : 이항 단정 인터페이스
    - BinaryOperator<T, T> : 추상 메서드 (T apply(T t, T t)) : 이항 연산 인터페이스
    

### 4. 컬렉션 스트림에서 람다 사용
- 람다는 컬렉션 스트림을 위한 기능에 크게 초점이 맞춰져 있다.
- 자바의 정석을 복습하자.


### 5. 메서드 레퍼런스와 생성자 레퍼런스

```java
age -> System.out.println(age)
```
- 위의 람다식은 인자를 아무런 가공 없이 그대로 출력한다. 
- 이와 같은 코드를 사용할 때 메서드 레퍼런스라는 간략한 형식을 사용할 수 있다.
- 메서드 레퍼런스는 다음 세 가지 유형이 있다.
    - 인스턴스::인스턴스메서드
    - 클래스::정적메서드
    - 클래스::인스턴스메서드
- 위 코드를 메서드 레퍼런스로 아래와 같이 변경할 수 있다.

```java
System.out::println // 인스턴스::인스턴스 메서드
```
- 이렇게 변경할 수 있다.


### 6. 인터페이스의 디폴트 메서드와 정적 메서드
- 기존 인터페이스에 새로운 추상 인스턴스 메서드를 추가하게 되면, 기존 모든 사용자 정의 클래스는 이를 추가적으로 구현해야 한다.
- 이를 방지하기 위해 이전 JDK를 기반으로 작성한 프로그램도 자바 8 JVM에서 구동할 수 있게 디폴트 메서드를 도입했다.
    - 디폴트 메서드 : 인스턴스 생성 후 사용할 수 있다.
    - 정적 메서드 : 인터페이스 이름으로 사용할 수 있다.
    


